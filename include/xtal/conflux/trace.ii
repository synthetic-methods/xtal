#pragma once
#include "./any.ii"






XTAL_ENV_(push)
namespace xtal::conflux
{/////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
///\
Wrapper used to schedule non-idempotent events.\

///\see e.g. [../message/any#hold] or [../message/any#intermit]`. \

///\todo\
Implement as 1-bite flip-flop? \

template <typename ..._s> XTAL_NYM trace;
template <class    ...Ts> XTAL_ASK trace_q = common::tag_p<trace, Ts...>;

template <class U> struct trace<U>: conferred<U, common::tag<trace>> {};
template <       > struct trace< >: trace<size_t> {};

template <class S=void, typename ...As>
using trace_s = common::compose_s<devoid_t<S, confined_t<>>, trace<As...>>;


///////////////////////////////////////////////////////////////////////////////
}/////////////////////////////////////////////////////////////////////////////
XTAL_ENV_(pop)
